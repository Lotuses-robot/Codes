# $2023$ 年中山市第一中学”正学班“自主招生考试—信息学竞赛

## 考试时间：$8：00-11：30$

| 题目名称 | 签到题 | 魔法配对 | 染色 | 游戏     |
| -------------- | -------- | -------- | --------- | --------- |
| 题目类型       | 传统型   | 传统型   | 传统型    | 传统型    |
| 可执行文件名   | A | B     | C     | D     |
| 输入文件名     | A.in  | B.in  | C.in  | D.in  |
| 输出文件名     | A.out | B.out | C.out | D.out |
| 每个测试点时限 | 1.0秒    | 1.0秒    | 1.0秒     | 2.0秒     |
| 内存限制       | 512  MiB | 512  MiB | 512  MiB  | 512  MiB  |
| 测试点数目     | 10       | 20      | 10      | 20       |
| 测试点是否等分 | 是       | 是       | 是        | 是        |
| 分值 | 60 | 60 | 80 | 100      |

赛前提示：

	1. 记得使用 freopen 读入或输出
	2. 比赛使用编译指令为-std=c++11 -O2 -Wl,--stack=4294967296

## 签到题

### 题目描述

你有一个队列 $A$，从队头到队尾分别有 $a_1,a_2,\dots,a_n$ 这 $n$ 个数字，且它们是 $1\sim n$ 的一个排列。你想通过一些寄存器把这些数字排序，寄存器共有 $k$ 个格子。你每步可以做以下操作之一：

- 把 $A$ 的队头数字弹出并输出。
- 把 $A$ 的队头数字弹出并放到寄存器的某个格子里。
- 把寄存器的某个格子里的数字输出。

你希望通过一系列操作使得你输出的数正好是 $1,2,3,\dots,n$。你需要计算出最少需要的寄存器的数量，也就是最小的 $k$。

### 输入格式

第一行一个整数 $n$。

接下来一行 $n$ 个整数，第 $i$ 个是 $a_i$。

### 输出格式

一行一个整数表示 $k$ 的最小值。

### 样例 #1

#### 样例输入 #1

```
4
1 3 4 2
```

#### 样例输出 #1

```
2
```

### 样例 #2

#### 样例输入 #2

```
10
1 3 2 4 6 7 5 8 10 9
```

#### 样例输出 #2

```
2
```
### 样例 #3

#### 样例输入 #3

见下发文件。

#### 样例输出 #3

见下发文件。

### 提示

对于全部数据，$1\le n\le 10000$。

|    测试点    |  $n$  |   $a_i$ |
| :----------: | :---: | :------: |
|  $1 \sim 3$| 无特殊限制  | $n-i+1$ |
|  $4\sim 5$ | $\leq 10$ | 无特殊限制 |
| $6\sim 10$  | 无特殊限制 | 无特殊限制 |

##  魔法配对

### 题目描述

在魔法世界里，一共有 $n$ 个人，每个人有魔力值  $a_i$ 。现在魔法世界要被攻击了，国王希望这 $n$ 个人能够两两配对出征抵抗外敌入侵。在魔法世界里，只有满足 $|i-j|=|a_i-a_j|$ 的两个人才可以配对，现在问是否可以配对成功。

### 输入描述

本题含有多组数据

第一行一个正整数 $T$ 表示数据组数。

接下来每组数据：

第一行一个正整数 $n$ 。

第二行 $n$ 个整数 $a_i$ 表示第 $i$ 个人的能力值。

### 输出描述

对于每组数据

若不可以配对成功，一行输出 $No$

若可以配对成功，第一行输出 $Yes$ ，并在下面 $n/2$ 行输出配对方案，每行两个数 $x_i,y_i$ 表示 $x_i$ 与 $y_i$ 进行配对。

### 样例输入

```
2
6
1 4 3 2 5 6
6
1 5 2 4 3 6
```

### 样例输出

```
Yes
4 2
6 5
3 1
No
```

### 数据范围

对于 $20\%$ 的数据，满足 $n\leq 10$

对于 $50\%$ 的数据，满足 $n\leq 1000$

对于另外 $20\%$ 的数据，满足 $a_i=i$ 或 $a_i=i+1$

对于 $100\%$ 的数据，满足 $T\leq 10,\sum n\leq 10^6,|a_i|\leq 10^9，n\equiv 0\pmod 2$

## 染色

### 题目描述

给定正整数 $n$。对于由 $1$ 到 $n$ 的正整数构成的集合的所有子集，你需要把每个子集染成黑色或白色。

要满足限制：若 $S_1$ 和 $S_2$ 的颜色相同，则 $S_1\cup S_2$ 的颜色也应与 $S_1$ 的颜色相同。

对于每个集合，把它染黑和染白都有对应的代价。请求出总代价的最小值。

### 输入格式

第一行一个正整数 $n$。

第二行，$2^n$ 个整数 $b_i$，第 $i$ 个数表示将第 $(i-1)$ 个集合染成黑色的代价。

第三行，$2^n$ 个整数 $w_i$，第 $i$ 个数表示将第 $(i-1)$ 个集合染成白色的代价。

（注：第 $i$ 个集合包含 $j$，当且仅当 $i$ 在二进制表示下的第 $j$ 位是 $1$。）

### 输出格式

一行一个整数表示总代价的最小值。

### 样例 #1

#### 样例输入 #1

```
2
3 -1 4 -1
-5 9 -2 6
```

#### 样例输出 #1

```
-9
```

### 样例 #2

见下发文件。

### 样例 #3

见下发文件。

### 提示

#### 样例

对于样例 #1，所有子集分别为：$\{\},\{1\},\{2\},\{1,2\}$

当第一个集合被染成白色，第二个集合被染成黑色，第三个集合被染成白色，第四个集合被染成黑色时，取最小值 $-9$

#### 数据范围

对于全部数据，$1\le n\le 20,-10^9\le b_i,w_i\le 10^9$。

对于 $25\%$ 的数据， $n\le 4$。

对于 $50\%$ 的数据，$n\le 15$。

对于 $100\%$ 的数据，无特殊限制。

## 游戏

### 题目描述

你最近发现了一个新的游戏，$Nim$ 游戏，定义是这样的：有若干堆石子，两个人轮流操作，一次操作可以从任意一堆石子中取走至少一个石子，无法操作者（即没有石子时）输。

于是 你 想出了一个新的游戏，规则是这样的：一开始有 $n$ 个 $Nim$ 游戏，每个游戏内一开始只有一堆石子，你会进行一些操作，操作有三种：

1.合并两个 $Nim$ 游戏，如果有一个 $Nim$ 游戏内的石子为 $\{2,1,3\}$，另一个为 $\{1,4,5\}$，那么合并后就是 $\{2,1,3,1,4,5\}$。

2.给一个 $Nim$ 游戏内所有石子堆中增加一个石子。

3.给一个石子堆增加 $k$ 颗石子。

每次操作后，还会询问：第 $x$ 个石子堆所在的 $Nim$ 游戏中，先手是否必胜。

### 输入描述

第一行两个整数 $n,q$ 表示一开始 $Nim$ 游戏的个数以及操作数量。
第二行 $n$ 个整数表示初始每堆石子的数量，一开始每堆石子属于一个 $Nim$ 游戏。
下面 $q$ 行每行一个操作，第一个整数 $id$ 表示操作类型 ：
1.如果 $id=1$，则再输入两个整数 $x,y$，表示合并 $x,y$ 两堆石子所在的 $Nim$ 游戏，保证他们不在同一个 $Nim$ 游戏内。
2.如果 $id=2$，则再输入一个整数 $x$，表示给 $x$ 这堆石子所在的 $Nim$ 游戏内所有石子堆增加一个石子。
3.如果 $id=3$，则再输入两个整数 $x,k$，表示给第 $x$ 堆石子增加 $k$ 颗石子。
每次操作后，你 需要你回答：第 $x$ 个石子堆所在的 $Nim$ 游戏中，先手是否必胜。

### 输出描述

输出 $q$ 行，若先手必胜，输出 $Yes$，否则输出 $No$。

### 样例输入

```
5 5
1 6 4 2 1
1 1 5
2 1
3 5 2
1 2 3
1 3 4
```

### 样例输出

```
No
No
Yes
Yes
No
```

### 数据范围

对于前 $20\%$ 的数据，满足 $n \leq 2 * 10^5,q \leq 200,a_i=0$。 

对于另外 $10\%$ 的数据，满足 $1$ 操作不超过 $100$ 次。

对于另外 $10\%$ 的数据，满足 $2$ 操作不超过 $100$ 次。 

对于另外 $10\%$ 的数据，满足 $3$ 操作不超过 $100$ 次。 

对于 $100\%$ 的数据，满足 $1\leq n,q \leq 3 * 10^5,0 \leq a_i,k \leq 10^9$，且保证任意时刻每堆石子数量都不超过 $10^9$。
