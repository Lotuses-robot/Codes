# Solution for P7914 bracket

先转换条件。

1. `()` `(S)`  => 括号内部可以包含 $k$ 个 `*`；
2. `AB` `ASB`  => 表明两个序列之间可以插入 $k$ 个 `*`；
3. `(A)` `(SA)` `(AS)` 如果要使用括号包裹整个序列，左右两边能 且仅能放入一边的 $k$ 个 `*` （例子：`(*()*)` 不合法）

题目的要求是将原序列替换 `?`，使序列合法的方案数。

---

注意到条件满足普通括号序列的要求。一般括号序列题目是区间 DP 的结论题。那么这道如何呢？

又注意到数据范围，$n\le 5\times10^2$，可以猜想是 $O(n^3)$​ 的算法。

> $n^3 \le 6.25\times10^8$

尝试思考 $\Theta(n^3)$。

最小的合法单元：`()` `(*...*)`。

如何拼接一个单元呢？

> 1. 拼接 `SA`：左边为连续 `*` 且数目不大于 $k$。
> 2. 拼接 `AS`：右边为连续 `*` 且数目不大于 $k$。

这是对的吗？还有外部的限制条件？如何转移？难点在于转移！

**由于形式过多，无法进行直接的转移！**

**那么就可以把形式拆分成最基础的可以合成的结构！**

